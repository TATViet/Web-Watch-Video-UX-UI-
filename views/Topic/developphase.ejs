<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>OwlLoop â€” Topic: Knowledge</title>


</head>

<body>
<div class="container">

<header>
  <div class="logo" onclick="location.href='/'">ðŸ¦‰</div>

  <div style="display:flex; gap:8px;">
    <% if (!user) { %>
      <div class="icon-btn" onclick="location.href='/login'">
        <svg class="icon" viewBox="0 0 24 24">
          <circle cx="12" cy="8" r="4"/>
          <path d="M4 20c0-4 4-6 8-6s8 2 8 6"/>
        </svg>
        Login
      </div>
    <% } else { %>
      <div class="icon-btn" onclick="location.href='/account'">
        <svg class="icon" viewBox="0 0 24 24">
          <circle cx="12" cy="8" r="4"/>
          <path d="M4 20c0-4 4-6 8-6s8 2 8 6"/>
        </svg>
        <%= user.name %>
      </div>
    <% } %>

    <div class="icon-btn">
      <svg class="icon" viewBox="0 0 24 24">
        <path d="M4 4h16v16H4z"/>
        <path d="M4 6l8 6 8-6"/>
      </svg>
    </div>

    <div class="icon-btn">
      <svg class="icon" viewBox="0 0 24 24">
        <circle cx="11" cy="11" r="7"/>
        <line x1="21" y1="21" x2="16.5" y2="16.5"/>
      </svg>
    </div>
  </div>
</header>

<div class="section-title">Topic: Knowledge</div>

<section class="topics-static">
  <div class="topic" onclick="location.href='/topic/knowledge'">Knowledge</div>
  <div class="topic" onclick="location.href='/topic/podcast'">Podcast</div>
  <div class="topic" onclick="location.href='/topic/asmr'">ASMR</div>
</section>

<section class="continue">
  <% if (videos && videos.length > 0) { %>
    <% videos.forEach(video => { %>
      <% 
        // Extract VIDEO_ID tá»« URL
        let videoId = '';
        if (video.url.includes('youtube.com/watch?v=')) {
          videoId = video.url.split('v=')[1].split('&')[0]; // Láº¥y ID tá»« full URL
        } else if (video.url.includes('youtu.be/')) {
          videoId = video.url.split('youtu.be/')[1].split('?')[0]; // Láº¥y ID tá»« short URL
        }
        const thumbnailUrl = videoId ? `https://img.youtube.com/vi/${videoId}/hqdefault.jpg` : 'https://via.placeholder.com/96x54?text=No+Thumb'; // Placeholder náº¿u khÃ´ng cÃ³, kÃ­ch thÆ°á»›c phÃ¹ há»£p vá»›i thumb
      %>
      <div class="continue-item" onclick="location.href='/watch?v=<%= encodeURIComponent(video.url) %>'">
        <div class="thumb">
          <img src="<%= thumbnailUrl %>" alt="<%= video.title %>">
        </div>
        <div class="continue-info">
          <div class="continue-title"><%= video.title %></div>
          <div class="continue-meta"><%= video.duration %> â€¢ <%= video.channel || 'Unknown' %></div>
        </div>
      </div>
    <% }); %>
  <% } else { %>
    <p>No videos available for this topic.</p>
  <% } %>

  <div class="premium">
    <b>Premium features</b>
    <ul>
      <li>No Ad</li>
      <li>Background play</li>
      <li>Detail Topic and Block, Favorite channel</li>
    </ul>
  </div>
</section>

</div>
</body>
</html>

